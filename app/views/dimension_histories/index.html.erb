<div class="container mt-4" data-controller="form">
  <h1>Form</h1>

  <%= form_with(url: get_dimensions_dimension_histories_path, method: :get, id: "dimension-history-form", 
  data: { controller: "dimension-form", action: "submit->dimension-form#submit" }, class: "mb-4") do |form| %>   
    <div class="row">
      <div class="col-md-12 mb-2">
        <div class="form-group">
          <%= form.label :url, "URL:", class: "form-label" %>
          <%= form.text_field :url, class: "form-control", data: { target: "form.url" } %>
          <div id="url-error" class="text-danger"></div>
        </div>
      </div>

      <div class="col-md-6 mb-2">
        <div class="form-group">
          <%= form.label :height, "Height:", class: "form-label" %>
          <%= form.text_field :height, class: "form-control", data: { target: "form.height" } %>
          <div id="height-error" class="text-danger"></div>
        </div>
      </div>

      <div class="col-md-6 mb-2">
        <div class="form-group">
          <%= form.label :width, "Width:", class: "form-label" %>
          <%= form.text_field :width, class: "form-control", data: { target: "form.width" } %>
          <div id="width-error" class="text-danger"></div>
        </div>
      </div>

      <div class="col-md-6 mb-2">
        <div class="form-group">
          <%= form.label :length, "Length:", class: "form-label" %>
          <%= form.text_field :length, class: "form-control", data: { target: "form.length" } %>
          <div id="length-error" class="text-danger"></div>
        </div>
      </div>

      <div class="col-md-6 mb-2">
        <div class="form-group">
          <%= form.label :weight, "Weight:", class: "form-label" %>
          <%= form.text_field :weight, class: "form-control", data: { target: "form.weight" } %>
          <div id="weight-error" class="text-danger"></div>
        </div>
      </div>

      <div class="col-md-12">
        <%= form.submit "Get Dimensions", class: "btn btn-primary" %>
      </div>
    </div>
  <% end %>

  <!-- Display flash messages -->
  <% if flash[:notice] %>
    <div class="alert alert-success" role="alert">
      <%= flash[:notice] %>
    </div>
  <% elsif flash[:alert] %>
    <div class="alert alert-danger" role="alert">
      <%= flash[:alert] %>
    </div>
  <% end %>

  <!-- Display API result -->
  <div id="result-section" data-controller="result" data-dimension-form-target="resultSection" class="mt-4">
    <!-- Kết quả từ API sẽ được hiển thị ở đây -->
  </div>

  <!-- Bảng Dimension Histories -->
  <div class="table-container">
    <h1 class="mt-4">Dimension Histories</h1>
    <table class="table">
      <!-- Table header -->
      <thead>
        <!-- Table header rows -->
        <tr>
          <th>STT</th>
          <th>URL</th>
          <th>Datetime</th>
          <th>Mac Address</th>
          <th>Result Code</th>
          <th>Result Name</th>
          <th>Width</th>
          <th>Length</th>
          <th>Height</th>
          <th>Weight</th>
        </tr>
      </thead>
      <!-- Table body -->
      <tbody>
        <% @dimension_histories.each_with_index do |history, index| %>
          <!-- Table body rows -->
          <tr>
            <!-- Table body columns -->
            <td><%= index + 1 %></td>
            <td><%= history.url %></td>
            <td><%= history.datetime %></td>
            <td><%= history.mac_address %></td>
            <td><%= history.result_code %></td>
            <td><%= history.result_name %></td>
            <td><%= history.width %></td>
            <td><%= history.length %></td>
            <td><%= history.height %></td>
            <td><%= history.weight %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
